<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Deck Dreamers - バトル</title>
    <link rel="stylesheet" href="taisen.css">
</head>
<body>
    <div class="battle-container">
        <!-- 対戦相手エリア -->
        <div class="player-area opponent-area">
            <div class="player-info">
                <div class="hp-display">
                    HP: <div class="hp-bar"><div id="opponent-hp-bar" class="hp-fill" style="width: 100%;"></div></div>
                    <span id="opponent-hp">10/10</span>
                </div>
                <div class="deck">
                    <img src="./カードの裏面.png" alt="カードの裏面" class="card-back">
                    <span class="deck-count" id="opponent-deck-count">25</span>
                </div>
            </div>
        </div>

        <!-- 相手の手札エリア -->
        <div class="hand-area" id="opponent-hand">
            <!-- 相手の手札（裏向き）は動的に生成 -->
        </div>

        <!-- バトルゾーン -->
        <div class="battle-zone">
            <div class="timer-container">
                <div class="turn-indicator" id="turn-indicator"></div>
                <div class="battle-content">
                    <div class="battle-area" id="player-battle-slot">
                        <!-- プレイヤーのカードが表示されます -->
                    </div>
                    <div class="timer">60</div>
                    <div class="battle-area" id="opponent-battle-slot">
                        <!-- 相手のカードが表示されます -->
                    </div>
                </div>
            </div>
            <div id="turn-end-container">
                <!-- ターンエンドボタンがここに動的に追加されます -->
            </div>
        </div>

        <!-- プレイヤーの手札エリア -->
        <div class="hand-area" id="player-hand">
            <!-- プレイヤーの手札は動的に生成 -->
        </div>

        <!-- プレイヤーエリア -->
        <div class="player-area player-area-self">
            <div class="player-info">
                <div class="hp-display">
                    HP: <div class="hp-bar"><div id="player-hp-bar" class="hp-fill" style="width: 100%;"></div></div>
                    <span id="player-hp">10/10</span>
                </div>
                <div class="deck">
                    <img src="./カードの裏面.png" alt="カードの裏面" class="card-back">
                    <span class="deck-count" id="player-deck-count">25</span>
                </div>
            </div>
        </div>
    </div>

    <!-- カード詳細表示用のポップアップ -->
    <div class="card-popup"></div>

    <!-- 対戦結果モーダル -->
    <div class="result-modal" id="result-modal">
        <div class="result-content">
            <h2 id="result-title"></h2>
            <p id="result-message"></p>
            <button onclick="location.href='../Room/room.html'" class="return-button">メニューに戻る</button>
        </div>
    </div>

    <!-- マッチング中のオーバーレイ -->
    <div id="matching-overlay" class="overlay">
        <div class="matching-content">
            <div class="matching-text">対戦相手を待っています...</div>
            <div class="spinner"></div>
        </div>
    </div>

    <!-- Firebase SDKの読み込み -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getFirestore, 
            collection, 
            getDocs, 
            doc, 
            updateDoc,
            getDoc,
            setDoc,
            addDoc,
            onSnapshot 
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        
        window.initializeApp = initializeApp;
        window.getFirestore = getFirestore;
        window.collection = collection;
        window.getDocs = getDocs;
        window.doc = doc;
        window.updateDoc = updateDoc;
        window.getDoc = getDoc;
        window.setDoc = setDoc;
        window.addDoc = addDoc;
        window.onSnapshot = onSnapshot;
    </script>
    <script type="module" src="taisen.js"></script>
</body>
</html>

